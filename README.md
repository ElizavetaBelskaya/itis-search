### –û—Å–Ω–æ–≤—ã –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ - 4—Å2s
–ï–ª–∏–∑–∞–≤–µ—Ç–∞ –ë–µ–ª—å—Å–∫–∞—è, 11-101

–ê–ª—å–º–∏—Ä–∞ –ú–∏–Ω–≥–∞–∑–æ–≤–∞, 11-103


### üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1Ô∏è‚É£ –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone https://github.com/ElizavetaBelskaya/itis-search.git
```

2Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install -r requirements.txt
```

### –ó–∞–¥–∞–Ω–∏–µ 1 - –∫—Ä–∞—É–ª–µ—Ä
–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –≤–µ–±-–∫—Ä–∞—É–ª–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–≥—Ä—É–∂–∞–µ—Ç HTML-—Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å **KPOP Fandom** (—Å–∞–π—Ç–∞-wiki) –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –ª–æ–∫–∞–ª—å–Ω–æ.
–°–∫—Ä–∏–ø—Ç –Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ Python —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **aiohttp** –∏ **BeautifulSoup**.

- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã  
- –û—á–∏—Å—Ç–∫–∞ HTML –æ—Ç –Ω–µ–Ω—É–∂–Ω—ã—Ö —Ç–µ–≥–æ–≤ (`script`, `style`, `meta`)  
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü –ª–æ–∫–∞–ª—å–Ω–æ –≤ `downloaded_pages/`  
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –≤ `index.txt`  
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏  
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏ –æ–±—Ö–æ–¥ —Å—Å—ã–ª–æ–∫ –≤–Ω—É—Ç—Ä–∏ KPOP Fandom wiki —Å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º –∏–∑ –æ–±—Ö–æ–¥–∞ —Å—Å—ã–ª–æ–∫ –Ω–∞ —Ñ–∞–π–ª—ã

### üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É crawler –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ `crawler.py`:
```bash
python crawler.py
```

### ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏
–í—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –∫–æ–¥–µ:
- `START_URL` ‚Äî –Ω–∞—á–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `MAX_PAGES` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
- `CONCURRENT_REQUESTS` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤


### –ó–∞–¥–∞–Ω–∏–µ 2 - —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è –∏ –ª–µ–º–º–∞—Ç–∏–∑–∞—Ü–∏—è

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ HTML-–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ. –°–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–¥–∞—á–∏:
- –û–±—Ö–æ–¥–∏—Ç –≤—Å–µ HTML-—Ñ–∞–π–ª—ã, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã–µ –≤ –ø–∞–ø–∫–µ `crawler/downloaded_pages`
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∏–∑ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ç–µ–∫—Å—Ç —Å –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ BeautifulSoup
- –¢–æ–∫–µ–Ω–∏–∑–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç, –≤—ã–¥–µ–ª—è—è –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞
- –§–∏–ª—å—Ç—Ä—É–µ—Ç —Ç–æ–∫–µ–Ω—ã: –∏—Å–∫–ª—é—á–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã, —Å—Ç–æ–ø-—Å–ª–æ–≤–∞ (—Å–æ—é–∑—ã, –ø—Ä–µ–¥–ª–æ–≥–∏), —á–∏—Å–ª–∞, –∞ —Ç–∞–∫–∂–µ "–º—É—Å–æ—Ä" (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–æ–∫–µ–Ω—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –±—É–∫–≤—ã –∏ —Ü–∏—Ñ—Ä—ã)
- –õ–µ–º–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç —Ç–æ–∫–µ–Ω—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º WordNetLemmatizer
- –î–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–æ–∫–µ–Ω—ã –≤ —Ñ–∞–π–ª `tokens_N.txt` –≤ –ø–∞–ø–∫–µ tokens
- –ì—Ä—É–ø–ø–∏—Ä—É–µ—Ç —Ç–æ–∫–µ–Ω—ã –ø–æ –ª–µ–º–º–∞–º –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ñ–∞–π–ª `lemmas_N.txt` –≤ –ø–∞–ø–∫–µ lemmas (–Ω–∞ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ: `<–ª–µ–º–º–∞> <—Ç–æ–∫–µ–Ω1> <—Ç–æ–∫–µ–Ω2> ... <—Ç–æ–∫–µ–ΩN>`)

### üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É tokenizer-lemmatizer –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ `main.py`:
```bash
python main.py
```

### –ó–∞–¥–∞–Ω–∏–µ 3 - –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å
*build_index.py*

–°—Ç—Ä–æ–∏—Ç –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å –∏–∑ —Ñ–∞–π–ª–æ–≤ lemmas_<id>.txt –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –µ–≥–æ –≤ inverted_index.tsv.

*search_by_index.py*

–ó–∞–≥—Ä—É–∂–∞–µ—Ç TSV-—Ñ–∞–π–ª –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –±—É–ª–µ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞ —Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏ (AND, OR, NOT) –∏ —Å–∫–æ–±–∫–∞–º–∏.

*inverted_index.tsv*

–§–∞–π–ª —Å –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏–Ω–¥–µ–∫—Å–æ–º

### üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É index –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ `build_index.py` –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞ —Å –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏–Ω–¥–µ–∫—Å–æ–º:
```bash
python index.py
```

–î–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –∏–Ω–¥–µ–∫—Å—É –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ñ–∞–π–ª `search_by_index.py`
```bash
python search_by_index.py
```

### –ó–∞–¥–∞–Ω–∏–µ 4 - TF-IDF
1. –ß–∏—Ç–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã –∏ –ª–µ–º–º—ã –∏–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (tokens_N.txt, lemmas_N.txt).
2. –°—á–∏—Ç–∞–µ—Ç TF, DF, TF-IDF: 
- –¥–ª—è —Ç–æ–∫–µ–Ω–æ–≤ ‚Äî –∫–∞–∫ —á–∞—Å—Ç–æ—Ç—É –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –æ–Ω–∏ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è;  
- –¥–ª—è –ª–µ–º–º ‚Äî –∞–≥—Ä–µ–≥–∏—Ä—É—è —á–∞—Å—Ç–æ—Ç—ã –≤—Å–µ—Ö —Ç–æ–∫–µ–Ω–æ–≤, –æ—Ç–Ω–æ—Å—è—â–∏—Ö—Å—è –∫ –ª–µ–º–º–µ.

```
TF (term frequency) ‚Äî —á–∞—Å—Ç–æ—Ç–∞ —Ç–µ—Ä–º–∏–Ω–∞ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ:
TF(term, doc) = count(term in doc) / total_terms_in_doc
DF (document frequency) ‚Äî –≤ —Å–∫–æ–ª—å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è —Ç–µ—Ä–º–∏–Ω.
IDF (inverse document frequency):
IDF(term) = log(N / DF(term))
TF-IDF:
TF-IDF(term, doc) = TF(term, doc) * IDF(term)
```
3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –¥–≤–∞ –Ω–∞–±–æ—Ä–∞ —Ñ–∞–π–ª–æ–≤:
- tfidf_tokens_N.txt ‚Äî TF-IDF –ø–æ —Ç–æ–∫–µ–Ω–∞–º
- tfidf_lemmas_N.txt ‚Äî TF-IDF –ø–æ –ª–µ–º–º–∞–º


### üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É tf-idf –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ `main.py` –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤:
```bash
python main.py
```

### –ó–∞–¥–∞–Ω–∏–µ 5 - –ø–æ–∏—Å–∫–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
–í–µ–∫—Ç–æ—Ä–Ω–∞—è –ø–æ–∏—Å–∫–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ TF-IDF –∏ –∫–æ—Å–∏–Ω—É—Å–Ω–æ–≥–æ —Å—Ö–æ–¥—Å—Ç–≤–∞ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.
–ö–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ ‚Äî —ç—Ç–æ –º–µ—Ç—Ä–∏–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –∏–∑–º–µ—Ä—è–µ—Ç —É–≥–æ–ª –º–µ–∂–¥—É –¥–≤—É–º—è –≤–µ–∫—Ç–æ—Ä–∞–º–∏ –≤ –º–Ω–æ–≥–æ–º–µ—Ä–Ω–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ.

1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –ª–µ–º–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏ –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å.
2. –°—Ç—Ä–æ–∏—Ç TF-IDF –≤–µ–∫—Ç–æ—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –ø–æ –ª–µ–º–º–∞–º.
3. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å: —Ä–∞–∑–±–∏–≤–∞–µ—Ç –µ–≥–æ –Ω–∞ —Ç–æ–∫–µ–Ω—ã, —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É.
4. –í—ã—á–∏—Å–ª—è–µ—Ç TF-IDF –≤–µ–∫—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–∞.
5. –°—á–∏—Ç–∞–µ—Ç –∫–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–æ–º –∏ –∫–∞–∂–¥—ã–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–º.
6. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–æ–ø-N –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å –Ω–∞–∏–≤—ã—Å—à–µ–π —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å—é.

–î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è: –Ω–æ–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞, —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å (–∫–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ), —Å–Ω–∏–ø–ø–µ—Ç (–¥–æ 100 —Å–ª–æ–≤ –≤–æ–∫—Ä—É–≥ —Ç–µ—Ä–º–∏–Ω–∞ –∑–∞–ø—Ä–æ—Å–∞)

### üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É vector-search –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ `search.py` –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞ —Å –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏–Ω–¥–µ–∫—Å–æ–º:
```bash
python search.py
```